"use strict";function _defineProperty(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}var agechart,fertilityChart,genderRateChart,ageingChart,pyramidChart,arr=[2016,2017,2018,2019,2020,2021,2022,2023,2024],data=[{name:"儿童(0<X<15岁)",value:100},{name:"成人 (15岁≤X<65岁)",value:300},{name:"老年人( 65岁≤X)",value:97}],obj={xAxis:[1.12,1.18,1.1,1.32,1.36,1.06,.92,1.1,.88],yAxis:[2016,2017,2018,2019,2020,2021,2022,2023,2024],marklinValue:2.1,max:2.3},areaData=[{name:"渝中区",value:12},{name:"万州区",value:412},{name:"涪陵区",value:98},{name:"大渡口区",value:236},{name:"江北区",value:4},{name:"璧山区",value:41},{name:"沙坪坝区",value:59},{name:"九龙坡区",value:69},{name:"南岸区",value:9},{name:"北碚区",value:56},{name:"綦江区",value:69},{name:"巫山县",value:59},{name:"大足区",value:39},{name:"渝北区",value:169},{name:"巴南区",value:269},{name:"黔江区",value:169},{name:"长寿区",value:9},{name:"江津区",value:59},{name:"合川区",value:29},{name:"永川区",value:69},{name:"南川区",value:59},{name:"铜梁区",value:9},{name:"潼南区",value:200},{name:"荣昌区",value:5},{name:"开州区",value:69},{name:"梁平区",value:9},{name:"武隆区",value:322},{name:"城口县",value:59},{name:"丰都县",value:59},{name:"垫江县",value:59},{name:"忠县",value:69},{name:"云阳县",value:9},{name:"奉节县",value:69},{name:"巫山县",value:32},{name:"巫溪县",value:30},{name:"石柱土家族自治县",value:15},{name:"秀山土家族苗族自治县",value:111},{name:"酉阳土家族苗族自治县",value:69},{name:"彭水苗族土家族自治县",value:369}];function loadageStructureChart(e){var a={color:["#C89340","#4296A7","#3A5BD5"],tooltip:{trigger:"item"},legend:{orient:"vertical",left:"55%",align:"left",top:"middle",textStyle:{color:"#5891A2",fontSize:"16"},data:e},series:[{name:"年龄结构",type:"pie",center:["35%","50%"],radius:["40%","65%"],clockwise:!1,avoidLabelOverlap:!0,label:{normal:{show:!1,position:"outter",formatter:function(e){return e.data.legendname}}},data:e}]};(agechart=echarts.init(document.getElementById("ageStructureChart"))).setOption(a)}function countRate(e){var a=[],t=0,i=!0,r=!1,n=void 0;try{for(var l,o=e[Symbol.iterator]();!(i=(l=o.next()).done);i=!0){t+=l.value.value}}catch(e){r=!0,n=e}finally{try{!i&&o.return&&o.return()}finally{if(r)throw n}}var s=!0,m=!1,c=void 0;try{for(var h,u=e[Symbol.iterator]();!(s=(h=u.next()).done);s=!0){var d=h.value,y="<li>"+Math.round(d.value/t*100)+"%</li>";a.push(y)}}catch(e){m=!0,c=e}finally{try{!s&&u.return&&u.return()}finally{if(m)throw c}}$(".ageStructureRate").html(a.join(""))}function tabHandle(){$(".tab-title").on("click",function(){var e=$(this).index();$(this).text();$(this).siblings(".tab-title").removeClass("active"),$(this).addClass("active"),$(".tab-content").eq(e).siblings(".tab-content").hide(),$(".tab-content").eq(e).show()}),$(".tab-title").eq(0).trigger("click")}function loadFertilityChart(e,a,t){fertilityChart=echarts.init(e);var i={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0,show:!1},xAxis:[{type:"value",axisTick:{show:!0,inside:!0,lineStyle:{color:"#03B4E3"}},axisLabel:{textStyle:{color:"#03B4E3"}},lineStyle:{color:"#03B4E3"},max:a.max,splitLine:{show:!1}}],yAxis:[{type:"category",data:a.yAxis,axisLabel:{textStyle:{color:"#03B4E3"}},axisTick:{inside:!0,lineStyle:{color:"#03B4E3"}}}],series:[{name:t,type:"bar",barWidth:"40%",data:a.xAxis,markLine:{symbol:"none",data:[{name:"更替水平线(2.1)",xAxis:a.marklinValue}],lineStyle:{normal:{color:"#FFD750"},emphasis:{color:"#D75E00",width:"2",type:"solid"}}},itemStyle:{normal:{color:"#3398DB"},emphasis:{color:new echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#FFD954"},{offset:1,color:"#D75E00"}],!1)}}}]};fertilityChart.setOption(i)}function loadGenderRateChart(e,a,t){genderRateChart=echarts.init(e);var i={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0,show:!1},xAxis:[{type:"value",axisTick:{show:!0,inside:!0,lineStyle:{color:"#03B4E3"}},axisLabel:{textStyle:{color:"#03B4E3"}},lineStyle:{color:"#03B4E3"},max:a.max,splitLine:{show:!1}}],yAxis:[{type:"category",data:a.yAxis,axisLabel:{textStyle:{color:"#03B4E3"}},axisTick:{inside:!0,lineStyle:{color:"#03B4E3"}}}],series:[{name:t,type:"bar",barWidth:"40%",data:a.xAxis,markLine:{symbol:"none",data:[{name:"更替水平线(2.1)",xAxis:a.marklinValue}],lineStyle:{normal:{color:"#FFD750"},emphasis:{color:"#D75E00",width:"2",type:"solid"}}},itemStyle:{normal:{color:"#3398DB"},emphasis:{color:new echarts.graphic.LinearGradient(0,0,0,1,[{offset:0,color:"#D75E00"},{offset:1,color:"#FFD954"}],!1)}}}]};genderRateChart.setOption(i)}function loadAgeingChart(e,a,t){ageingChart=echarts.init(e);var i={tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0,show:!1},xAxis:[{type:"value",axisTick:{show:!0,inside:!0,lineStyle:{color:"#03B4E3"}},axisLabel:{textStyle:{color:"#03B4E3"}},lineStyle:{color:"#03B4E3"},max:a.max,splitLine:{show:!1}}],yAxis:[{type:"category",data:a.yAxis,axisLabel:{textStyle:{color:"#03B4E3"}},axisTick:{inside:!0,lineStyle:{color:"#03B4E3"}}}],series:[{name:t,type:"bar",barWidth:"40%",data:a.xAxis,markLine:{symbol:"none",data:[{name:"更替水平线(2.1)",xAxis:a.marklinValue}],lineStyle:{normal:{color:"#FFD750"},emphasis:{color:"#D75E00",width:"2",type:"solid"}}},itemStyle:{normal:{color:"#3398DB"},emphasis:{color:new echarts.graphic.LinearGradient(0,0,1,0,[{offset:0,color:"#FFD954"},{offset:1,color:"#D75E00"}],!1)}}}]};ageingChart.setOption(i)}function getPyramidChartData(){for(var e={male:[],female:[],ydata:["0-5","6-10","11-15","16-20","21-25","26-30","31-35","36-40","41-45","46-50","51-55","56-60","61-65","66-70","71-75","76-80","81-85","86-90","91-95","96-100","100+"]},a=0;a<e.ydata.length;a++){var t=Math.round(300*Math.random()),i=Math.round(300*Math.random());e.male.push(t),e.female.push(i)}loadPyramidChart(e)}function arrSort(e){for(var a=0;a<e.length-1;a++)for(var t=0;t<e.length-a-1;t++)if(e[t]>e[t+1]){var i=e[t];e[t]=e[t+1],e[t+1]=i}return e}function loadPyramidChart(e){var a,t,i=e.male.slice(),r=e.female.slice(),n=arrSort(i)[i.length-1],l=arrSort(r)[r.length-1];t=l<n?n:l,e.male=e.male.map(function(e){return-e}),pyramidChart=echarts.init(document.getElementById("pyramidChart"));var o={color:["#4791D8","#F269A0"],tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:function(e){var a;return 1==e.length&&e[0].value?a="年龄段:"+e[0].name+"(岁)<br>"+e[0].seriesName+Math.abs(e[0].value)+"(万人)":1==e.length&&e[1].value?(e[1].name,e[1].seriesName,Math.abs(e[1].value)):a="年龄段:"+e[0].name+"(岁)<br>"+e[0].seriesName+Math.abs(e[0].value)+"(万人)<br>"+e[1].seriesName+Math.abs(e[1].value)+"(万人)",a}},legend:{data:["男性","女性"],left:"right",textStyle:{color:"#5891A2"},right:"20"},grid:{show:!1},xAxis:[{type:"value",max:t,axisTick:{show:!1},axisLabel:{textStyle:{color:"#5891A2"},formatter:function(e){return Math.abs(e)}},splitLine:{show:!1},lineStyle:{color:"#5891A2"}}],yAxis:[(a={type:"category",axisTick:{show:!1},data:e.ydata},_defineProperty(a,"axisTick",{show:!1,inside:!0,lineStyle:{color:"#5891A2"}}),_defineProperty(a,"axisLabel",{textStyle:{color:"#5891A2"}}),_defineProperty(a,"lineStyle",{color:"#5891A2"}),_defineProperty(a,"left","0"),a)],series:[{name:"男性",type:"bar",barWidth:"60%",stack:"总量",label:{normal:{show:!1}},data:e.male},{name:"女性",type:"bar",stack:"总量",label:{normal:{show:!1,formatter:function(e){return e.value}}},data:e.female}]};pyramidChart.setOption(o)}function loadThatYearDistributionChart(t){var r={"渝中区":[106.56288,29.556742],"万州区":[108.380246,30.807807],"涪陵区":[107.394905,29.703652],"大渡口区":[106.48613,29.481002],"江北区":[106.532844,29.575352],"沙坪坝区":[106.4542,29.541224],"九龙坡区":[106.364269,29.428456],"南岸区":[106.560813,29.523992],"北碚区":[106.437868,29.82543],"綦江区":[106.651417,29.028091],"大足区":[105.715319,29.700498],"渝北区":[106.512851,29.601451],"巴南区":[106.519423,29.381919],"黔江区":[108.782577,29.527548],"长寿区":[107.074854,29.833671],"江津区":[106.253156,29.283387],"合川区":[106.265554,29.990993],"永川区":[105.894714,29.348748],"南川区":[107.098153,29.156646],"璧山区":[106.231126,29.593581],"铜梁区":[106.054948,29.839944],"潼南区":[105.841818,30.189554],"荣昌区":[105.594061,29.403627],"开州区":[108.413317,31.167735],"梁平区":[107.800034,30.672168],"武隆区":[107.75655,29.32376],"城口县":[108.6649,31.946293],"丰都县":[107.73248,29.866424],"垫江县":[107.348692,30.330012],"忠县":[108.037518,30.291537],"云阳县":[108.697698,30.930529],"奉节县":[109.465774,31.019967],"巫山县":[109.878928,31.074843],"巫溪县":[109.628912,31.3966],"石柱土家族自治县":[108.112448,29.99853],"秀山土家族苗族自治县":[108.996043,28.444772],"酉阳土家族苗族自治县":[108.767201,28.839828],"彭水苗族土家族自治县":[108.166551,29.293856]},i=function(e){for(var a=[],t=0;t<e.length;t++){var i=r[e[t].name];i&&a.push({name:e[t].name,value:i.concat(e[t].value),selected:e[t].selected})}return a}(t),n=echarts.init(document.getElementById("thatYearDistributionChart"));n.showLoading(),t.sort(function(e,a){return a.value-e.value}),$.getJSON("../json/chongqing.json",function(e){echarts.registerMap("chongqing",e);var a={tooltip:{trigger:"item",formatter:function(e){return e.name+" : <br/>"+e.seriesName+" : "+e.data.value[2]+"万人"}},visualMap:{type:"continuous",show:!0,textStyle:{color:"#5891A2",fontWeight:"400",fontFamily:"MicrosoftYaHei",fontSize:"12px"},right:"100",bottom:"80",min:t[t.length-1].value,max:t[0].value,text:["户籍人口",""],calculable:!0,inRange:{color:["#318095","#254751","#1F3D45"]},formatter:function(e){return 4<=e.length?Math.round(e/1e4)+"万人":Math.round(e)}},series:[{type:"map",map:"chongqing",name:"户籍人口",label:{normal:{show:!1},emphasis:{show:!1}},data:i,roam:!0,itemStyle:{normal:{areaColor:"#318095",borderColor:"#489099"},emphasis:{areaColor:"#FFD750"}}}]};n.hideLoading(),n.setOption(a)})}function chartReLoad(){countRate(data),loadageStructureChart(data),getPyramidChartData(),loadThatYearDistributionChart(areaData)}function timelineHandle(e){for(var a=[],t=0;t<e.length;t++){var i="<li>"+e[t]+"</li>";a.push(i)}$(".timeline").html(a.join("")),$(".timeline").off("click","li").on("click","li",function(){$(this).siblings("li").removeClass("active"),$(this).addClass("active");var e=$(this).text();chartReLoad(),fertilityChart.dispatchAction({type:"downplay",seriesName:"总和出生率"}),fertilityChart.dispatchAction({type:"highlight",name:e}),genderRateChart.dispatchAction({type:"downplay",seriesName:"出生性别比"}),genderRateChart.dispatchAction({type:"highlight",name:e}),ageingChart.dispatchAction({type:"downplay",seriesName:"人口老龄化"}),ageingChart.dispatchAction({type:"highlight",name:e})}),$(".timeline").find("li").eq(0).trigger("click")}$(function(){loadFertilityChart(document.getElementById("fertilityChart"),obj,"总和出生率"),loadGenderRateChart(document.getElementById("genderRateChart"),obj,"出生性别比"),loadAgeingChart(document.getElementById("ageingChart"),obj,"人口老龄化"),tabHandle(),timelineHandle(arr)});